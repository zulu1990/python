trigger:
  - none
pr:
  - none

# developer_token is temproraly 

parameters:
  - name: execute_path
    displayName: chose path to execute
    default: SYNC_ANALYTIC
    type: string
    values:
      - SYNC_ANALYTIC
      - UPDATE_QNA_MAKER

variables:
  - group: 'training-center'
  - name: vmImageName
    value: 'ubuntu-latest'

jobs:
  - job: 
    pool:
      vmImage: $(vmImageName)
    steps:
      - task: PowerShell@2
        inputs:
          targetType: 'inline'
          script: |
            $foo = [FooObject](Get-Content 'C:\path\to\your.json' | Out-String | ConvertFrom-Json)
            
            Write-Host $foo
      - task: UsePythonVersion@0
        displayName: 'Use Python 3.x'
      - task: Bash@3
        inputs:
          targetType: 'inline'
          script: |
            pip install pytest 
            pip install pytest-cov 
            pip install pytest-xdist 
            pip install pytest-bdd 

        displayName: 'Install a bunch of pip packages.'
        
      - bash: 'pytest --junitxml=$(Build.StagingDirectory)/010.xml' 
        workingDirectory: '010_CrackingCodeBasic'
        displayName: 'Run test 010'

      - bash: 'pytest --junitxml=$(Build.StagingDirectory)/020.xml' 
        workingDirectory: '020_CrackingIntermediate'
        displayName: 'Run test 020'

      - task: PublishTestResults@2
        displayName: 'Publish test result /010.xml'
        inputs:
          testResultsFiles: '$(Build.StagingDirectory)/010.xml'
          testRunTitle: 010

      - task: PublishTestResults@2
        displayName: 'Publish test result /020.xml'
        inputs:
          testResultsFiles: '$(Build.StagingDirectory)/020.xml'
          testRunTitle: 020      
        